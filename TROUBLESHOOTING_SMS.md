# ุญู ูุดุงูู ุฅุฑุณุงู SMS - Troubleshooting Guide

## ๐ ุงููุดููุฉ: Double Shake ูุง ูุฑุณู SMS

### โ ุฎุทูุงุช ุงูุชุญูู (Checklist)

#### 1. **ุชุญูู ูู Gesture Control**
- [ ] ูู Gesture Control ููุนููุ (Switch ูู ุดุงุดุฉ Control)
- [ ] ูู Status ูุธูุฑ "Active"ุ
- [ ] ูู ุชูุฌุฏ ุฅุดุนุงุฑ ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช "Gesture Control Active"?

**ุงูุญู:**
- ุงูุชุญ ุดุงุดุฉ Control
- ูุนูู Switch
- ุชุฃูุฏ ูู ููุญ ุงูุตูุงุญูุงุช

---

#### 2. **ุชุญูู ูู Double Shake**
- [ ] ูู ูุชู ุงูุชุดุงู Double Shakeุ

**ููู ุชุชุญูู:**
1. ุงูุชุญ Logcat ูู Android Studio
2. ุงุจุญุซ ุนู: `GestureDetector`
3. ูุฒ ุงููุงุชู ูุฑุชูู
4. ูุฌุจ ุฃู ุชุฑู:
   ```
   Shake detected! Delta: X.XX
   Shake count: 1
   Shake detected! Delta: X.XX
   Shake count: 2
   *** DOUBLE SHAKE DETECTED! ***
   ```

**ุฅุฐุง ูู ุชุฑู ุฃู ุดูุก:**
- ุชุฃูุฏ ุฃู Gesture Control ููุนูู
- ูุฒ ุงููุงุชู ุจููุฉ ุฃูุจุฑ
- ุชุญูู ูู Logcat ููุฃุฎุทุงุก

---

#### 3. **ุชุญูู ูู ุฌูุงุช ุงูุงุชุตุงู ุงูุทุงุฑุฆุฉ**
- [ ] ูู ูุฏูู ุฌูุงุช ุงุชุตุงู ุทุงุฑุฆุฉุ

**ููู ุชุชุญูู:**
1. ุงุฐูุจ ุฅูู "Emergency Contacts"
2. ุชุฃูุฏ ูู ูุฌูุฏ ุฌูุงุช ุงุชุตุงู
3. ุชุญูู ูู ุงูุฃุฑูุงู

**ูู Logcat:**
```
SOSUtil: User logged in: [ุงุณูู] (ID: X)
SOSUtil: Emergency contacts count: X
SOSUtil: Contact: [ุงุณู] - Phone: [ุฑูู]
```

**ุฅุฐุง ูุงูุช ุงููุงุฆูุฉ ูุงุฑุบุฉ:**
- ุฃุถู ุฌูุฉ ุงุชุตุงู ุทุงุฑุฆุฉ
- ุชุฃูุฏ ูู ุญูุธูุง

---

#### 4. **ุชุญูู ูู ุงูุตูุงุญูุงุช**
- [ ] ูู ุตูุงุญูุฉ SMS ููููุญุฉุ

**ููู ุชุชุญูู:**
1. Settings โ Apps โ Your App โ Permissions
2. ุชุฃูุฏ ูู ุชูุนูู "SMS"

**ูู Logcat:**
```
SOSUtil: SMS permission granted  โ
ุฃู
SOSUtil: SMS permission NOT granted  โ
```

**ุงูุญู:**
- ุงุฐูุจ ุฅูู Settings
- ูุนูู ุตูุงุญูุฉ SMS
- ุฃู ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู ูุงููุญ ุงูุตูุงุญูุฉ

---

#### 5. **ุชุญูู ูู ุฑูู ุงููุงุชู**

**ุงููุดููุฉ ุงูุดุงุฆุนุฉ:**
- ุฑูู ุงููุงุชู 8 ุฃุฑูุงู ููุท (ูุซู: `12345678`)
- ูุฏ ูุญุชุงุฌ ููุฏ ุงูุฏููุฉ

**ุงูุญู ุงููุฏูุฌ:**
ุงูููุฏ ูุถูู ููุฏ ุงูุฏููุฉ ุชููุงุฆูุงู:
```java
if (phoneNumber.length() == 8 && !phoneNumber.startsWith("+")) {
    phoneNumber = "+216" + phoneNumber;  // Tunisia
}
```

**ููู ุชุฃูุฏ ูู:**
- ุงูุฑูู ุตุญูุญ (8 ุฃุฑูุงู)
- ูุง ูุญุชูู ุนูู ูุณุงูุงุช ุฃู ุฑููุฒ
- ุฅุฐุง ูุงู ุฑููู ูู ุจูุฏ ุขุฎุฑุ ุบููุฑ `+216` ุฅูู ููุฏ ุจูุฏู

---

#### 6. **ุชุญูู ูู SIM Card**
- [ ] ูู ููุฌุฏ SIM Card ูู ุงููุงุชูุ
- [ ] ูู ุชูุฌุฏ ุฅุดุงุฑุฉ ุดุจูุฉุ
- [ ] ูู ูุฏูู ุฑุตูุฏ (ูู ุจุนุถ ุงูุจูุฏุงู)ุ

**ุงูุญู:**
- ุชุฃูุฏ ูู ูุฌูุฏ SIM Card
- ุชุฃูุฏ ูู ูุฌูุฏ ุฅุดุงุฑุฉ ุดุจูุฉ
- ุฌุฑุจ ุฅุฑุณุงู SMS ูุฏููุงู ููุชุฃูุฏ

---

#### 7. **ุชุญูู ูู Logcat**

ุงูุชุญ Logcat ูุงุจุญุซ ุนู:

**ุนูุฏ Double Shake:**
```
GestureDetector: *** DOUBLE SHAKE DETECTED! ***
GestureService: *** DOUBLE SHAKE DETECTED - SENDING SOS ***
SOSUtil: === sendSOSAlert() called ===
```

**ุนูุฏ ุฅุฑุณุงู SMS:**
```
SOSUtil: Found X emergency contact(s)
SOSUtil: Processing contact: [ุงุณู] - Phone: [ุฑูู]
SOSUtil: Attempting to send SMS to: [ุฑูู]
SOSUtil: SMS sent successfully to [ุงุณู]
```

**ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ:**
```
SOSUtil: SecurityException: SMS permission denied
โ ุงูุญู: ููุญ ุตูุงุญูุฉ SMS

SOSUtil: IllegalArgumentException: Invalid phone number
โ ุงูุญู: ุชุญูู ูู ุชูุณูู ุงูุฑูู

SOSUtil: No emergency contacts found
โ ุงูุญู: ุฃุถู ุฌูุงุช ุงุชุตุงู
```

---

## ๐๏ธ ุญููู ุณุฑูุนุฉ

### **ุงููุดููุฉ 1: ูุง ูุชู ุงูุชุดุงู Double Shake**

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชูุนูู Gesture Control
2. ูุฒ ุงููุงุชู ุจููุฉ ุฃูุจุฑ
3. ูุฒ ูุฑุชูู ุจุณุฑุนุฉ (ุฎูุงู ุซุงููุฉ)

---

### **ุงููุดููุฉ 2: "No emergency contacts found"**

**ุงูุญู:**
1. ุงุฐูุจ ุฅูู "Emergency Contacts"
2. ุงุถุบุท ุนูู ุฒุฑ ุงูุฅุถุงูุฉ (+)
3. ุฃุฏุฎู ุงูุงุณู ูุงูุฑูู (8 ุฃุฑูุงู)
4. ุงุญูุธ

---

### **ุงููุดููุฉ 3: "SMS permission required"**

**ุงูุญู:**
1. Settings โ Apps โ Your App โ Permissions
2. ูุนูู "SMS"
3. ุฃู ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู ูุงููุญ ุงูุตูุงุญูุฉ ุนูุฏ ุงูุทูุจ

---

### **ุงููุดููุฉ 4: SMS ูุง ููุฑุณู (ูุง ููุฌุฏ ุฎุทุฃ)**

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. **ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ**
   - ุชุฃูุฏ ูู 8 ุฃุฑูุงู
   - ุฌุฑุจ ุฅุถุงูุฉ ููุฏ ุงูุฏููุฉ ูุฏููุงู

2. **ูุง ุชูุฌุฏ ุฅุดุงุฑุฉ ุดุจูุฉ**
   - ุชุญูู ูู ุฅุดุงุฑุฉ ุงูุดุจูุฉ
   - ุฌุฑุจ ุฅุฑุณุงู SMS ูุฏููุงู

3. **SIM Card ุบูุฑ ููุนู**
   - ุชุฃูุฏ ูู ุชูุนูู SIM Card
   - ุฌุฑุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงููุงุชู

4. **ุฑูู ุงููุงุชู ูุญุชุงุฌ ููุฏ ุฏููุฉ ูุฎุชูู**
   - ุฅุฐุง ูุงู ุฑููู ูู ุจูุฏ ุขุฎุฑุ ุบููุฑ `+216` ูู ุงูููุฏ

---

## ๐ง ุชุนุฏูู ููุฏ ุงูุฏููุฉ

ุฅุฐุง ูุงู ุฑููู ูู ุจูุฏ ุขุฎุฑ (ููุณ ุชููุณ):

**ูู SOSUtil.java:**
```java
// ุบููุฑ ูุฐุง ุงูุณุทุฑ:
if (phoneNumber.length() == 8 && !phoneNumber.startsWith("+")) {
    phoneNumber = "+216" + phoneNumber;  // ุชููุณ
    
    // ุฅูู:
    phoneNumber = "+[ููุฏ ุจูุฏู]" + phoneNumber;
    // ูุซุงู: "+33" ููุฑูุณุงุ "+1" ูุฃูุฑููุงุ ุฅูุฎ
}
```

**ุฃู ุฃุถู ุฑูู ูุงูู ูุน ููุฏ ุงูุฏููุฉ:**
- ุนูุฏ ุฅุถุงูุฉ ุฌูุฉ ุงุชุตุงูุ ุฃุฏุฎู ุงูุฑูู ูุงููุงู: `+21612345678`

---

## ๐ฑ ุงุฎุชุจุงุฑ ุณุฑูุน

### **ุงูุฎุทูุงุช:**

1. **ุฃุถู ุฌูุฉ ุงุชุตุงู:**
   - ุงุณู: "Test"
   - ุฑูู: ุฑููู ุงูุดุฎุตู (8 ุฃุฑูุงู)

2. **ุงูุชุญ Logcat:**
   - Filter: `SOSUtil` ุฃู `GestureDetector`

3. **ูุฒ ุงููุงุชู ูุฑุชูู**

4. **ุชุญูู ูู Logcat:**
   - ูุฌุจ ุฃู ุชุฑู ุฌููุน ุงูุฎุทูุงุช
   - ูุฌุจ ุฃู ุชุฑู "SMS sent successfully"

5. **ุชุญูู ูู ูุงุชูู:**
   - ูุฌุจ ุฃู ุชุณุชูุจู SMS

---

## ๐ฏ ุงูุฎูุงุตุฉ

**ุงูุฃุณุจุงุจ ุงูุฃูุซุฑ ุดููุนุงู:**

1. โ Gesture Control ุบูุฑ ููุนูู
2. โ ูุง ุชูุฌุฏ ุฌูุงุช ุงุชุตุงู ุทุงุฑุฆุฉ
3. โ ุตูุงุญูุฉ SMS ุบูุฑ ููููุญุฉ
4. โ ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ
5. โ ูุง ุชูุฌุฏ ุฅุดุงุฑุฉ ุดุจูุฉ

**ุงูุญู:**
- ุงุชุจุน Checklist ุฃุนูุงู
- ุชุญูู ูู Logcat
- ุชุฃูุฏ ูู ุฌููุน ุงููุชุทูุจุงุช

---

## ๐ ุฅุฐุง ูู ูุนูู ุจุนุฏ

1. **ุงูุชุญ Logcat**
2. **ูุฒ ุงููุงุชู ูุฑุชูู**
3. **ุงูุณุฎ ุฌููุน ุงูุฑุณุงุฆู ูู Logcat**
4. **ุงุจุญุซ ุนู:**
   - `SOSUtil`
   - `GestureDetector`
   - `GestureService`
   - `Exception` ุฃู `Error`

5. **ุฃุฑุณู Logcat output** ูุฃุฑู ุงููุดููุฉ ุจุงูุถุจุท

